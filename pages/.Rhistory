# basic data
species = geojson_read("../assets/maps/mof_simple.geojson", what = "sp")
proj4string(species) = "+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs"
nam = readRDS("../assets/maps/labels_crowns.rds")
names(species) = nam
setwd("B:/mof_caldern/pages/")
library(rgdal)
library(link2GI)
library(mapview)
library(raster)
library(RColorBrewer)
library(geojsonio)
# basic data
species = geojson_read("../assets/maps/mof_simple.geojson", what = "sp")
proj4string(species) = "+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs"
nam = readRDS("../assets/maps/labels_crowns.rds")
names(species) = nam
# basic data
species = geojson_read("../assets/maps/mof_simple.geojson", what = "sp")
proj4string(species) = "+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs"
nam = readRDS("../assets/maps/labels_crowns.rds")
names(species) = nam
m1 = mapview::mapview(species, zcol = c("species"),
color = "black",
#at = seq(40,100,2.5),
col.regions = palSpecs,
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Result of Classification")
###################### Classification Map Object ###################################
palSpecs = c("#66c2a5","#fc8d62", "#8da0cb","#e78ac3")
m1 = mapview::mapview(species, zcol = c("species"),
color = "black",
#at = seq(40,100,2.5),
col.regions = palSpecs,
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Result of Classification")
###################### Classification Map Object ###################################
palSpecs = c("#66c2a5","#fc8d62", "#8da0cb","#e78ac3")
m1 = mapview::mapview(species, zcol = c("species"),
color = "black",
#at = seq(40,100,2.5),
col.regions = palSpecs,
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Result of Classification")
# basic data
species = readOGR("../assets/maps/mof_simple.geojson",layer = "mof_simple")
proj4string(species) = "+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs"
nam = readRDS("../assets/maps/labels_crowns.rds")
names(species) = nam
###################### Classification Map Object ###################################
palSpecs = c("#66c2a5","#fc8d62", "#8da0cb","#e78ac3")
m1 = mapview::mapview(species, zcol = c("species"),
color = "black",
#at = seq(40,100,2.5),
col.regions = palSpecs,
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Result of Classification")
library(spdplyr)
m1 = mapview::mapview(species, zcol = c("species"),
color = "black",
#at = seq(40,100,2.5),
col.regions = palSpecs,
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Result of Classification")
names(species)
head(specuies)
head(species)
unique(species@data[species])
unique(species@data["species"])
summary(species@data["species"])
m2 = mapview::mapview(species, zcol = c("quality"),
color = "black",
at = seq(25,100,5),
col.regions = redgreen(16),
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Quality of Classification")
redgreen = grDevices::colorRampPalette(c("red","green"))
m2 = mapview::mapview(species, zcol = c("quality"),
color = "black",
at = seq(25,100,5),
col.regions = redgreen(16),
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Quality of Classification")
intens = colorRampPalette(c("khaki1","hotpink4","gray0"))
m3 = mapview::mapview(species, zcol = c("NDirNeigh"),
color = "grey",
at = seq(1,14,1),
col.regions = intens(14),
na.color = "forestgreen",
lwd = 0.1,
legend = TRUE,
layer.name = "Direct Neighbours")
###################### Density Map Object ###################################
intens = colorRampPalette(c("lemonchiffon","darkolivegreen3","forestgreen"))
m4 = mapview::mapview(species, zcol = c("dens"),
color = "grey",
at = seq(0,1,0.02),
col.regions = intens(51),
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Vertical Vegetation Density")
m4
species = readOGR("../assets/maps/mof_realdata.shp")
proj4string(species) = "+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs"
nam = readRDS("../assets/maps/labels_crowns.rds")
names(species) = nam
###################### Classification Map Object ###################################
palSpecs = c("#66c2a5","#fc8d62", "#8da0cb","#e78ac3")
m1 = mapview::mapview(species, zcol = c("species"),
color = "black",
col.regions = palSpecs,
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Result of Classification")
names(species)
x = head(species@data)
x
# basic data
species = readOGR("../assets/maps/mof_simple.geojson",layer = "mof_simple")
nam = readRDS("../assets/maps/labels_crowns.rds")
names(species) = nam
y = head(species@data)
y
species = species[,-20]
head(species)
proj4string(species) = "+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs"
nam = readRDS("../assets/maps/labels_crowns.rds")
names(species) = nam
names(species)
str(species)
###################### Classification Map Object ###################################
palSpecs = c("#66c2a5","#fc8d62", "#8da0cb","#e78ac3")
m1 = mapview::mapview(species, zcol = c("species"),
color = "black",
col.regions = palSpecs,
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Result of Classification")
spcies
species
redgreen = grDevices::colorRampPalette(c("red","green"))
m2 = mapview::mapview(species, zcol = c("quality"),
color = "black",
at = seq(25,100,5),
col.regions = redgreen(16),
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Quality of Classification")
intens = colorRampPalette(c("khaki1","hotpink4","gray0"))
m3 = mapview::mapview(species, zcol = c("NDirNeigh"),
color = "grey",
at = seq(1,14,1),
col.regions = intens(14),
na.color = "forestgreen",
lwd = 0.1,
legend = TRUE,
layer.name = "Direct Neighbours")
###################### Density Map Object ###################################
intens = colorRampPalette(c("lemonchiffon","darkolivegreen3","forestgreen"))
m4 = mapview::mapview(species, zcol = c("dens"),
color = "grey",
at = seq(0,1,0.02),
col.regions = intens(51),
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Vertical Vegetation Density")
###################### Biodiversity 30m Map Object ###################################
greenred = colorRampPalette(c("green","yellow","red"))
m5 = mapview::mapview(species, zcol = c("div30"),
color = "black",
at = seq(0,1.4,0.1),
col.regions = greenred(15),
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Biodiversity Index (30 meters)")
###################### Biodiversity 10m Map Object ###################################
greenred = colorRampPalette(c("green","yellow","red"))
m6 = mapview::mapview(species, zcol = c("div10"),
color = "black",
at = seq(0,1.4,0.1),
col.regions = greenred(15),
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Biodiversity Index (10 meters)")
###################### Biodiversity 1 acre Map Object ###################################
greenred = colorRampPalette(c("green","yellow","red"))
m7 =  mapview::mapview(species, zcol = c("divA"),
color = "black",
at = seq(0,1.4,0.1),
col.regions = greenred(15),
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Biodiversity Index (1 acre)")
mapshot(m1, url = "..assets/maps/mapobjects/classification.html")
mapshot(m1, url = "classification.html")
mapshot(m2, url = "..assets/maps/mapobjects/quality.html")
mapshot(m2, url = "quality.html")
mapshot(m3, url = "..assets/maps/mapobjects/drcN.html")
mapshot(m3, url = "drcN.html")
mapshot(m4, url = "density.html")
mapshot(m5, url = "..assets/maps/mapobjects/biodiv30.html")
mapshot(m5, url = "biodiv30.html")
mapshot(m6, url = "..assets/maps/mapobjects/biodiv10.html")
mapshot(m6, url = "biodiv10.html")
mapshot(m7, url = "biodiv1acre.html")
mapshot(m1, url = "classification.html")
###################### Stats Map Object ###################################
shapeAbt = readOGR("../assets/maps/shapeAbt.shp")
namA = readRDS("../assets/maps/namesAbt.rds")
names(shapeAbt) = namA
sections = readOGR("../assets/maps/uwcWaldorte_AOI.shp")
names(sections) = c("sectionID","SpeciesSection")
colAbt = RColorBrewer::brewer.pal(name = "Set3", 9)
colSpec = c("#66c2a5","#fc8d62", "#8da0cb","#e78ac3")
org = par()
m8 = mapview::mapview(sections,zcol = "SpeciesSection",
color = "black",
col.regions =  c("#66c2a5","#fc8d62", "#8da0cb","#e78ac3"),
alpha.regions = 0.4,
layer.name = "Dominant Species")
lopt = leaflet::labelOptions(noHide = TRUE,
direction = 'top',
textOnly = TRUE)
m8 = mapview::addStaticLabels(m,label = as.character(sections$sectionID), labelOptions = lopt)
m8 = mapview::addStaticLabels(m8,label = as.character(sections$sectionID), labelOptions = lopt)
m8
mapshot(m8, url = "statmap.html")
species$species = as.character(species$species)
which(species$species=="1")
species$species[which(species$species=="1")] = "Beech"
species$species[which(species$species=="2")] = "Dgl. Spruce"
species$species[which(species$species=="3")] = "Oak"
species$species[which(species$species=="4")] = "Spruce"
m1 = mapview::mapview(species, zcol = c("species"),
color = "black",
col.regions = palSpecs,
na.color = "grey",
lwd = 0.1,
legend = TRUE,
layer.name = "Result of Classification")
mapshot(m1, url = "classificationMap.html")
