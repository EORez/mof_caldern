---
layout: page
title: "Quality of Classification"
output: md_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(rgdal)
library(link2GI)
library(mapview)
library(raster)
library(RColorBrewer)
library(geojsonio)
library(rmapshaper)
library(spdplyr)
species = geojson_read("../assets/maps/mof_simple.geojson", what = "sp")
proj4string(species) = "+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs"
nam = readRDS("../assets/maps/labels_crowns.rds")
names(species) = nam
```


## Quality of Classification of the University Forest Caldern
This is a preview of the map for tree species biodiversity in a 30 meter environment for the University Forest Caldern.
Unfortunatley, due to file size limitations on github, the fully interactive version of the [map](http://seminar.environmentalinformatics-marburg.de/Seminar_RS/biodiversity30.html) is hosted by servers of the Environmental Informatics Department of the University of Marburg. Be aware that the file size is above 100 MB.

Each segment is classified to a specific species by counting the pixels within the segment. The majority class is used to label the segment.
[Quality](https://github.com/GeoMOER-Students-Space/mpg-envinfosys-teams-2018-rs_18_axmideda/blob/master/src/011_structure_values.R#L62) thus is measured here by the percentage of the majority pixels within a tree segment.
Trees where two or more classes have the same number of pixels within a segment were excluded because no clear species label could be attributed to these segments.



```{r echo = FALSE, warning=FALSE}

redgreen = grDevices::colorRampPalette(c("red","green"))

mapview::mapview(species, zcol = c("quality"),
                       color = "black",
                       at = seq(25,100,5),
                       col.regions = redgreen(16),
                       na.color = "grey",
                       lwd = 0.1,
                       legend = TRUE,
                  layer.name = "Quality of Classification")


```



